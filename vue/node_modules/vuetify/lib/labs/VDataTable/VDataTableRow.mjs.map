{"version":3,"file":"VDataTableRow.mjs","names":["VBtn","VCheckboxBtn","useExpanded","useHeaders","useSelection","VDataTableColumn","withModifiers","defineComponent","getPropertyFromItem","useRender","VDataTableRow","name","props","index","Number","item","Object","onClick","Function","setup","slots","isSelected","toggleSelect","isExpanded","toggleExpand","columns","value","length","map","column","i","align","fixed","fixedOffset","lastFixed","key","width","default","slotName","slotProps"],"sources":["../../../src/labs/VDataTable/VDataTableRow.tsx"],"sourcesContent":["// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VCheckboxBtn } from '@/components/VCheckbox'\n\n// Composables\nimport { useExpanded } from './composables/expand'\nimport { useHeaders } from './composables/headers'\nimport { useSelection } from './composables/select'\nimport { VDataTableColumn } from './VDataTableColumn'\n\n// Utilities\nimport { withModifiers } from 'vue'\nimport { defineComponent, getPropertyFromItem, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { DataTableItem } from './types'\n\nexport const VDataTableRow = defineComponent({\n  name: 'VDataTableRow',\n\n  props: {\n    index: Number as PropType<Number>,\n    item: Object as PropType<DataTableItem>,\n    onClick: Function as PropType<(e: MouseEvent) => void>,\n  },\n\n  setup (props, { slots }) {\n    const { isSelected, toggleSelect } = useSelection()\n    const { isExpanded, toggleExpand } = useExpanded()\n    const { columns } = useHeaders()\n\n    useRender(() => (\n      <tr\n        class={[\n          'v-data-table__tr',\n          {\n            'v-data-table__tr--clickable': !!props.onClick,\n          },\n        ]}\n        onClick={ props.onClick }\n      >\n        { !columns.value.length && (\n          <VDataTableColumn\n            key=\"no-data\"\n            v-slots={ slots }\n          />\n        )}\n\n        { props.item && columns.value.map((column, i) => (\n          <VDataTableColumn\n            align={ column.align }\n            fixed={ column.fixed }\n            fixedOffset={ column.fixedOffset }\n            lastFixed={ column.lastFixed }\n            noPadding={ column.key === 'data-table-select' || column.key === 'data-table-expand' }\n            width={ column.width }\n          >\n            {{\n              default: () => {\n                const item = props.item!\n                const slotName = `item.${column.key}`\n                const slotProps = {\n                  index: props.index,\n                  item: props.item,\n                  columns: columns.value,\n                  isSelected,\n                  toggleSelect,\n                  isExpanded,\n                  toggleExpand,\n                }\n\n                if (slots[slotName]) return slots[slotName]!(slotProps)\n\n                if (column.key === 'data-table-select') {\n                  return slots['item.data-table-select']?.(slotProps) ?? (\n                    <VCheckboxBtn\n                      modelValue={ isSelected([item]) }\n                      onClick={ withModifiers(() => toggleSelect(item), ['stop']) }\n                    />\n                  )\n                }\n\n                if (column.key === 'data-table-expand') {\n                  return slots['item.data-table-expand']?.(slotProps) ?? (\n                    <VBtn\n                      icon={ isExpanded(item) ? '$collapse' : '$expand' }\n                      size=\"small\"\n                      variant=\"text\"\n                      onClick={ withModifiers(() => toggleExpand(item), ['stop']) }\n                    />\n                  )\n                }\n\n                return getPropertyFromItem(item.columns, column.key)\n              },\n            }}\n          </VDataTableColumn>\n        ))}\n      </tr>\n    ))\n  },\n})\n\nexport type VDataTableRow = InstanceType<typeof VDataTableRow>\n"],"mappings":"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"}