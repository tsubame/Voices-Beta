"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[378],{254:function(e,t,l){l.r(t),l.d(t,{default:function(){return q}});var o=l(3396),a=l(9242),s=l(7139),i=l(5101),r=l(11),c=l(1888),n=l(3601),m=l(6422),d=l(6824),u=l(8521),g=l(3289),h=l(3140),w=l(7325),f=l(1583),B=l(5869);const _=e=>((0,o.dD)("data-v-23fa667b"),e=e(),(0,o.Cn)(),e),I=_((()=>(0,o._)("h2",{class:"mt-200"},"配信部屋作成",-1)));function D(e,t,l,_,D,U){const k=(0,o.up)("router-link"),p=(0,o.up)("RoomBGMSelectDialog"),C=(0,o.up)("RoomBGImageSelectDialog");return(0,o.wg)(),(0,o.j4)(h.O,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m.O,{onSubmit:(0,a.iM)(U.submitForm,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(d.o,{justify:"center"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.D,{cols:"8",class:"mt-20"},{default:(0,o.w5)((()=>[I,(0,o.Wm)(k,{to:"/rooms"},{default:(0,o.w5)((()=>[(0,o.Wm)(i.T,{icon:"mdi-close",variant:"tonal",id:"editFormCloseBox",rounded:"",size:"x-small"})])),_:1})])),_:1}),(0,o.Wm)(u.D,{cols:"8"},{default:(0,o.w5)((()=>[(0,o.Wm)(B.h,{modelValue:D.form.title,"onUpdate:modelValue":t[0]||(t[0]=e=>D.form.title=e),label:"部屋名",required:""},null,8,["modelValue"]),(0,o.Wm)(f.r,{modelValue:D.form.category,"onUpdate:modelValue":t[1]||(t[1]=e=>D.form.category=e),items:D.categories,label:"カテゴリ"},null,8,["modelValue","items"]),(0,o.Wm)(f.r,{modelValue:D.form.webRtcService,"onUpdate:modelValue":t[2]||(t[2]=e=>D.form.webRtcService=e),items:D.webRtcServices,label:"通信手段"},null,8,["modelValue","items"])])),_:1}),(0,o.Wm)(u.D,{cols:"8",class:"text-right"},{default:(0,o.w5)((()=>[(0,o._)("small",null,"BGM: 『"+(0,s.zw)(D.selectedBgmTitle)+"』",1),(0,o.Uk)("  "),(0,o.Wm)(i.T,{"prepend-icon":"mdi-music",class:"selectButton",onClick:U.onBGMSelectButtonClick},{prepend:(0,o.w5)((()=>[(0,o.Wm)(g.t,{color:"success"})])),default:(0,o.w5)((()=>[(0,o.Uk)(" BGM選択 ")])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(u.D,{cols:"8",class:"text-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(i.T,{large:"",id:"castStartButton","prepend-icon":"mdi-cast",type:"submit"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(g.t,{color:"success"})])),default:(0,o.w5)((()=>[(0,o.Uk)(" 配信開始 ")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(n.B,{modelValue:D.showBGMDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>D.showBGMDialog=e),persistent:"",width:"600"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{onClickSubmit:U.onBGMSelectDialogOKButtonClick,selectedBgmTitle:D.selectedBgmTitle},null,8,["onClickSubmit","selectedBgmTitle"])])),_:1},8,["modelValue"]),(0,o.Wm)(n.B,{modelValue:D.showBGImageDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>D.showBGImageDialog=e),persistent:"",width:"600"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{onClickSubmit:U.onBGImageSelectDialogOKButtonClick,selectedImageTitle:D.selectedImageTitle},null,8,["onClickSubmit","selectedImageTitle"])])),_:1},8,["modelValue"]),(0,o.Wm)(n.B,{modelValue:D.showLoadingDialog,"onUpdate:modelValue":t[5]||(t[5]=e=>D.showLoadingDialog=e),"hide-overlay":"",persistent:"",width:"300"},{default:(0,o.w5)((()=>[(0,o.Wm)(r._,{color:"success",dark:""},{default:(0,o.w5)((()=>[(0,o.Wm)(c.Z,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" Please stand by "),(0,o.Wm)(w.K,{indeterminate:"",color:"white",class:"mb-0"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])])),_:1})}l(7658);var U=l(4161),k=l(1022),p=l(6572),C=l(1334),W=l(3369),v=l(9234),T=l(6145),b=l(7754),S=l(3150),G=l(2127);const O=e=>((0,o.dD)("data-v-0263f9f7"),e=e(),(0,o.Cn)(),e),V=O((()=>(0,o._)("h4",null,"BGMの選択",-1))),y=O((()=>(0,o._)("small",null,"以下からBGMを選択し、OKを押して下さい。",-1))),M=["src"];function R(e,t,l,a,n,m){return(0,o.wg)(),(0,o.j4)(r._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.E,null,{default:(0,o.w5)((()=>[V])),_:1}),(0,o.Wm)(c.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W.K,null,{default:(0,o.w5)((()=>[y,(0,o.Wm)(T.i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b.b,null,{default:(0,o.w5)((()=>[(0,o.Uk)("BGM一覧")])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.bgmFiles,((e,t)=>((0,o.wg)(),(0,o.j4)(S.l,{key:t,value:e.title,onClick:t=>m.onListItemClick(e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(g.t,null,{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-music")])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(G.V,{textContent:(0,s.zw)(e.title)},null,8,["textContent"])])),_:2},1032,["value","onClick"])))),128))])),_:1})])),_:1})])),_:1}),(0,o.Wm)(C.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v.C),(0,o.Wm)(i.T,{id:"okButton",variant:"elevated",color:"success",onClick:m.onOKButtonClick},{default:(0,o.w5)((()=>[(0,o.Uk)(" OK ")])),_:1},8,["onClick"]),(0,o.Wm)(v.C)])),_:1}),(0,o._)("audio",{ref:"audioElement",src:n.returnData.selectedBgmUrl,onCanplay:t[0]||(t[0]=(...t)=>e.play&&e.play(...t))},null,40,M)])),_:1})}var K={props:["selectedBgmTitle","selectedBgmUrl"],data(){return{returnData:{selectedBgmTitle:this.selectedBgmTitle,selectedBgmUrl:this.selectedBgmUrl},bgmFiles:this.$store.getters.getBgms}},watch:{},methods:{onListItemClick(e){try{this.returnData.selectedBgmUrl=e.filePath,this.returnData.selectedBgmTitle=e.title,console.log(this.returnData.selectedBgmUrl),this.$nextTick((function(){this.$refs.audioElement.pause(),this.$refs.audioElement.play(),this.$refs.audioElement.volume=k.t.BGM_DEFAULT_VOLUME,this.$refs.audioElement.loop=!0}))}catch(t){console.error(t)}},onOKButtonClick(){try{this.$emit("clickSubmit",this.returnData)}catch(e){console.error(e)}}}},$=l(89);const E=(0,$.Z)(K,[["render",R],["__scopeId","data-v-0263f9f7"]]);var L=E,x=l(1285);const A=e=>((0,o.dD)("data-v-13d1825e"),e=e(),(0,o.Cn)(),e),F=A((()=>(0,o._)("h4",null,"背景画像の選択",-1))),P=A((()=>(0,o._)("small",null,"以下から背景画像を選択し、OKを押して下さい。",-1)));function Z(e,t,l,a,n,m){return(0,o.wg)(),(0,o.j4)(r._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.E,null,{default:(0,o.w5)((()=>[F])),_:1}),(0,o.Wm)(c.Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W.K,null,{default:(0,o.w5)((()=>[P,(0,o.Wm)(d.o,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.imageFiles,((e,t)=>((0,o.wg)(),(0,o.j4)(u.D,{cols:"4",key:t},{default:(0,o.w5)((()=>[(0,o.Wm)(x.f,{class:(0,s.C_)(["bgImageItem",{active:n.activeIndex===t}]),value:e.title,src:e.filePath,onClick:l=>m.onListItemClick(e,t)},null,8,["value","src","onClick","class"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),(0,o.Wm)(C.h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v.C),(0,o.Wm)(i.T,{id:"okButton",variant:"elevated",color:"success",onClick:m.onOKButtonClick},{default:(0,o.w5)((()=>[(0,o.Uk)(" OK ")])),_:1},8,["onClick"]),(0,o.Wm)(v.C)])),_:1})])),_:1})}var j={props:["selectedImageTitle"],data(){return{returnData:{selectedImageTitle:this.selectedImageTitle,selectedImageUrl:this.selectedImageUrl},imageFiles:this.$store.getBgImages,activeIndex:0}},mounted(){try{this.imageFiles=this.$store.getters.getBgImages}catch(e){console.error(e)}},methods:{onListItemClick(e,t){try{this.returnData.selectedImageUrl=e.filePath,this.returnData.selectedImageTitle=e.title,this.activeIndex=t}catch(l){console.error(l)}},onOKButtonClick(){try{let e=this.imageFiles[this.activeIndex];this.returnData.selectedImageUrl=e.filePath,this.returnData.selectedImageTitle=e.title,this.$emit("clickSubmit",this.returnData)}catch(e){console.error(e)}}}};const z=(0,$.Z)(j,[["render",Z],["__scopeId","data-v-13d1825e"]]);var N=z;U.Z.defaults.headers.post["Access-Control-Allow-Origin"]="*";var Y={components:{RoomBGMSelectDialog:L,RoomBGImageSelectDialog:N},data(){return{categories:k.t.ROOM_CATEGORY_VALS,webRtcServices:k.t.ROOM_SERVICES_VALS,form:{title:"",ownerUserId:0,ownerUserName:"",thumImage_Url:"",bgImageUrl:"",bgmUrl:"",category:"",webRtcService:"",description:"",startedAt:new Date},showBGMDialog:!1,showBGImageDialog:!1,showLoadingDialog:!1,selectedBgmTitle:"未選択",selectedBgmUrl:"",selectedImageTitle:"未選択",selectedImageUrl:""}},mounted(){try{let e=this.$store.getters.getTargetUserData;console.log("[ユーザデータ]"),console.log(e)}catch(e){console.error(e)}},methods:{async submitForm(){this.setPostRoomData(),console.log("[送信データプレビュー]"),console.log(this.form),this.showLoadingDialog=!0,U.Z.post(k.t.API_URL_GO_ROOM_CREATE,this.form).then((e=>{console.log(e.data);const t=e.data.id;this.showLoadingDialog=!1,this.$router.push("/rooms/"+t)})).catch((e=>{console.log(e)}))},setPostRoomData(){try{const e=window.location.protocol+"//"+window.location.host;this.form.ownerUserId=this.$store.getters.getTargetUserId,this.form.ownerUserName=this.$store.getters.getTargetUserName,this.form.thumImageUrl=e+this.$store.getters.getTargetUserProfileImagerUrl,this.form.bgmUrl=e+this.selectedBgmUrl,this.form.bgImageUrl=e+this.selectedImageUrl,this.form.startedAt=new Date}catch(e){console.error(e)}},onBGMSelectButtonClick(){this.showBGMDialog=!0},onBGMSelectDialogOKButtonClick(e){this.showBGMDialog=!1,this.selectedBgmTitle=e.selectedBgmTitle,this.selectedBgmUrl=e.selectedBgmUrl},onBGImageSelectDialogOKButtonClick(e){try{this.showBGImageDialog=!1,this.selectedImageTitle=e.selectedImageTitle,this.selectedImageUrl=e.selectedImageUrl,console.log(this.selectedImageTitle)}catch(t){console.error(t)}}}};const H=(0,$.Z)(Y,[["render",D],["__scopeId","data-v-23fa667b"]]);var q=H}}]);
//# sourceMappingURL=editForm.afeefcad.js.map